<!DOCTYPE html>
<html>
<head>
    <title>AI –ö–æ–Ω—Å–ø–µ–∫—Ç–æ—Ä</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .upload-area {
            border: 3px dashed #4CAF50;
            padding: 40px;
            text-align: center;
            margin: 20px 0;
            cursor: pointer;
            border-radius: 10px;
            background: #f9f9f9;
            transition: 0.3s;
        }
        .upload-area:hover {
            background: #e8f5e9;
            border-color: #2E7D32;
        }
        textarea {
            width: 100%;
            height: 150px;
            padding: 15px;
            margin: 15px 0;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            font-weight: bold;
            transition: 0.3s;
        }
        button:hover {
            background: #388E3C;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
        }
        #result {
            margin-top: 20px;
            padding: 20px;
            background: #e8f5e9;
            border-radius: 8px;
            display: none;
        }
        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            color: #666;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4CAF50;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ü§ñ AI –ö–æ–Ω—Å–ø–µ–∫—Ç–æ—Ä</h1>
        <p style="text-align: center; color: #666; margin-bottom: 30px;">
            –ó–∞–≥—Ä—É–∑–∏ —Ñ–∞–π–ª –∏–ª–∏ –≤—Å—Ç–∞–≤—å —Ç–µ–∫—Å—Ç ‚Üí –ø–æ–ª—É—á–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Å–ø–µ–∫—Ç —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
        </p>
        
        <!-- –û–±–ª–∞—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
            <div style="font-size: 48px; margin-bottom: 15px;">üìÅ</div>
            <div style="font-size: 18px; font-weight: bold;">–ù–∞–∂–º–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞</div>
            <div style="color: #666; margin-top: 10px;">
                TXT, PDF, DOCX, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ç–µ–∫—Å—Ç–æ–º
            </div>
        </div>
        <input type="file" id="fileInput" style="display: none;" accept=".txt,.pdf,.docx,.jpg,.jpeg,.png">
        
        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ñ–∞–π–ª–µ -->
        <div id="fileInfo" style="display: none; background: #f0f8ff; padding: 10px; border-radius: 5px; margin: 10px 0;">
            ‚úÖ –§–∞–π–ª –≤—ã–±—Ä–∞–Ω: <span id="fileName" style="font-weight: bold;"></span>
        </div>
        
        <div style="text-align: center; margin: 20px 0; font-weight: bold; color: #666;">–ò–õ–ò</div>
        
        <!-- –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ -->
        <textarea id="textInput" placeholder="–í—Å—Ç–∞–≤—å —Å—é–¥–∞ —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞..."></textarea>
        
        <!-- –ö–Ω–æ–ø–∫–∞ -->
        <button onclick="createSummary()">
            üöÄ –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç —Å –∫–ª—é—á–µ–≤—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
        </button>
        
        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div>AI –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤–∞—à –∑–∞–ø—Ä–æ—Å... –ü–æ–¥–æ–∂–¥–∏—Ç–µ 10-20 —Å–µ–∫—É–Ω–¥</div>
        </div>
        
        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç -->
        <div id="result">
            <h3>üìù –í–∞—à –∫–æ–Ω—Å–ø–µ–∫—Ç –≥–æ—Ç–æ–≤:</h3>
            <pre id="summaryText" style="background: white; padding: 15px; border-radius: 5px; overflow: auto; max-height: 400px;"></pre>
            <button onclick="copyToClipboard()" style="background: #2196F3; margin-top: 10px;">
                üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Å–ø–µ–∫—Ç
            </button>
            <button onclick="downloadSummary()" style="background: #FF9800; margin-top: 10px;">
                ‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å –∫–∞–∫ —Ñ–∞–π–ª
            </button>
        </div>
        
        <div style="margin-top: 30px; padding: 15px; background: #f5f5f5; border-radius: 8px; font-size: 14px; color: #666;">
            <strong>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong><br>
            1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ —Ç–µ–∫—Å—Ç<br>
            2. AI —Å–æ–∑–¥–∞—Å—Ç –∫–æ–Ω—Å–ø–µ–∫—Ç —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏<br>
            3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–ª–∏ —Å–∫–∞—á–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        </div>
    </div>

    <script>
        // –õ–æ–∫–∞–ª—å–Ω—ã–π AI –¥–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ API)
    let currentFile = null;

// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞
        document.getElementById('fileInput').addEventListener('change', function(e) {
        const file = e.target.files[0];
        if (!file) return;
    
    currentFile = file;
    
    // –ß–∏—Ç–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
    if (file.type === 'text/plain' || file.name.endsWith('.txt')) {
        const reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('textInput').value = e.target.result;
            document.getElementById('fileInfo').innerHTML = 
                `üìÑ <strong>${file.name}</strong> –∑–∞–≥—Ä—É–∂–µ–Ω (${formatFileSize(file.size)})`;
            document.getElementById('fileInfo').style.display = 'block';
        };
        reader.readAsText(file);
    } else {
        alert('üìé –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ TXT —Ñ–∞–π–ª—ã. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–∞ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –ø–æ–ª–µ –Ω–∏–∂–µ.');
        document.getElementById('fileInfo').innerHTML = 
            `‚ö†Ô∏è <strong>${file.name}</strong> ‚Äî –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–µ–∫—Å—Ç –≤—Ä—É—á–Ω—É—é`;
        document.getElementById('fileInfo').style.display = 'block';
    }
});

// –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞
function createSummary() {
    const text = document.getElementById('textInput').value.trim();
    
    if (!text) {
        alert('‚úèÔ∏è –í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–Ω—Å–ø–µ–∫—Ç–∞');
        return;
    }
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
    document.getElementById('loading').style.display = 'block';
    document.getElementById('result').style.display = 'none';
    
    // –ò–º–∏—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É AI (1 —Å–µ–∫—É–Ω–¥–∞)
    setTimeout(() => {
        const summary = generateLocalSummary(text);
        
        document.getElementById('summaryText').textContent = summary;
        document.getElementById('result').style.display = 'block';
        document.getElementById('loading').style.display = 'none';
        
    }, 1000);
}

// –õ–æ–∫–∞–ª—å–Ω—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤
function generateLocalSummary(text) {
    // –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç
    const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 10);
    const words = text.split(/\s+/).filter(w => w.length > 2);
    const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);
    
    // –ù–∞—Ö–æ–¥–∏–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
    const wordFrequency = {};
    words.forEach(word => {
        const lowerWord = word.toLowerCase();
        wordFrequency[lowerWord] = (wordFrequency[lowerWord] || 0) + 1;
    });
    
    // –¢–æ–ø-—Å–ª–æ–≤
    const topWords = Object.entries(wordFrequency)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 8)
        .map(([word]) => word);
    
    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    const stats = {
        chars: text.length,
        words: words.length,
        sentences: sentences.length,
        paragraphs: paragraphs.length,
        topWords: topWords
    };
    
    // –°–æ–∑–¥–∞–µ–º –∫–æ–Ω—Å–ø–µ–∫—Ç
    return `## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –¢–ï–ö–°–¢–ê:
‚Ä¢ –°–∏–º–≤–æ–ª–æ–≤: ${stats.chars}
‚Ä¢ –°–ª–æ–≤: ${stats.words}
‚Ä¢ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π: ${stats.sentences}
‚Ä¢ –ê–±–∑–∞—Ü–µ–≤: ${stats.paragraphs}


${generateParagraphSummary(paragraphs)}

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è:
${stats.topWords.map(word => `‚Ä¢ **${word}** ‚Äî –≤–∞–∂–Ω—ã–π —Ç–µ—Ä–º–∏–Ω –≤ —Ç–µ–∫—Å—Ç–µ`).join('\n')}

### –ü—Ä–∏–º–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑–ª–æ–∂–µ–Ω–∏—è:
${generateLogicFlow(paragraphs)}

—å AI API (Gemini, DeepSeek –∏ –¥—Ä.)*`;
}

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
function generateParagraphSummary(paragraphs) {
    if (paragraphs.length === 0) return "‚Ä¢ –¢–µ–∫—Å—Ç –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —á–µ—Ç–∫–∏—Ö –∞–±–∑–∞—Ü–µ–≤";
    
    return paragraphs.slice(0, 5).map((para, idx) => {
        const firstSentence = para.split(/[.!?]/)[0]?.substring(0, 80) || para.substring(0, 80);
        return `‚Ä¢ **–ê–±–∑–∞—Ü ${idx + 1}:** ${firstSentence}...`;
    }).join('\n');
}

function generateLogicFlow(paragraphs) {
    if (paragraphs.length <= 1) return "‚Ä¢ –ú–∞—Ç–µ—Ä–∏–∞–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –µ–¥–∏–Ω—ã–º –±–ª–æ–∫–æ–º";
    
    const flow = [];
    if (paragraphs.length >= 1) flow.push("1. –í–≤–µ–¥–µ–Ω–∏–µ –∏–ª–∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã");
    if (paragraphs.length >= 2) flow.push("2. –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏");
    if (paragraphs.length >= 3) flow.push("3. –ü—Ä–∏–º–µ—Ä—ã –∏–ª–∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è");
    if (paragraphs.length >= 4) flow.push("4. –ó–∞–∫–ª—é—á–µ–Ω–∏–µ –∏–ª–∏ –≤—ã–≤–æ–¥—ã");
    if (paragraphs.length > 4) flow.push(`5. ... –∏ –µ—â–µ ${paragraphs.length - 4} —Ä–∞–∑–¥–µ–ª–æ–≤`);
    
    return flow.map(item => `‚Ä¢ ${item}`).join('\n');
}

function formatFileSize(bytes) {
    if (bytes < 1024) return bytes + ' –ë';
    if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' –ö–ë';
    return (bytes / 1048576).toFixed(1) + ' –ú–ë';
}

function copyToClipboard() {
    const text = document.getElementById('summaryText').textContent;
    navigator.clipboard.writeText(text)
        .then(() => alert('‚úÖ –ö–æ–Ω—Å–ø–µ–∫—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!'))
        .catch(() => alert('‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è'));
}

function downloadSummary() {
    const text = document.getElementById('summaryText').textContent;
    const blob = new Blob([text], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = '–∫–æ–Ω—Å–ø–µ–∫—Ç_' + new Date().toLocaleDateString('ru-RU') + '.txt';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
}
    </script>
